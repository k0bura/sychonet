---
interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {description && <meta name="description" content={description} />}
    <title>{title}</title>
  </head>
  <body>
    <div class="phone-wall">
      <pre>{`
▒▒▒ ACCESS DENIED ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒

> TERMINAL SIZE ERROR
> INSUFFICIENT COLUMN WIDTH
>
> Are you seriously trying to view
> this site on a phone? In ${new Date().getFullYear()}?
>
> This site was built for 80 columns.
> Your device has the screen real
> estate of a postage stamp.
>
> Go find a real computer.
> Preferably one that weighs at
> least 5kg and has a CRT.
>
> NO CARRIER
`}</pre>
    </div>
    <main>
      <slot />
    </main>
    <footer>
      <p>&copy; {new Date().getFullYear()} jeff | <a href={`${import.meta.env.BASE_URL}`}>~/sychonet</a></p>
    </footer>
  </body>
</html>

<script>
  document.addEventListener('keydown', (e) => {
    if (e.ctrlKey || e.altKey || e.metaKey) return;
    const tag = (e.target as HTMLElement).tagName;
    if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return;

    const key = e.key.toUpperCase();

    if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
      const routes: Record<string, string> = {
        P: '/projects/',
        A: '/about/',
        L: '/links/',
        N: '/news/',
        F: '/files/',
        C: '/contact/',
      };
      if (routes[key]) {
        e.preventDefault();
        window.location.href = routes[key];
      }
    }

    if (e.key === 'Escape') {
      e.preventDefault();
      window.location.href = '/';
    }
  });
</script>

<style is:global>
  @font-face {
    font-family: 'IBM Plex Mono';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/fonts/ibm-plex-mono-regular.woff2') format('woff2');
  }

  @font-face {
    font-family: 'IBM Plex Mono';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('/fonts/ibm-plex-mono-bold.woff2') format('woff2');
  }

  body {
    font-family: 'IBM Plex Mono', monospace;
    background: #111;
    color: #c0c0c0;
    max-width: 80ch;
    margin: 0 auto;
    padding: 2rem 1rem;
    line-height: 1.6;
  }

  a {
    color: #ffcc00;
  }

  a:visited {
    color: #cc9900;
  }

  a:hover {
    color: #111;
    background: #ffcc00;
  }

  h1, h2, h3, h4 {
    color: #ffcc00;
    font-weight: normal;
  }

  code {
    background: #1a1a1a;
    padding: 0.2em 0.4em;
    font-size: 0.95em;
  }

  pre {
    font-family: 'IBM Plex Mono', monospace;
    background: #1a1a1a !important;
    padding: 1rem;
    overflow-x: hidden;
    border: 1px solid #332b00;
  }

  pre code {
    background: none;
    padding: 0;
  }

  hr {
    border: none;
    border-top: 1px dashed #332b00;
    margin: 1.5rem 0;
  }

  header a {
    text-decoration: none;
    font-size: 1.2em;
  }

  footer {
    color: #665200;
    font-size: 0.9em;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  .phone-wall {
    display: none;
  }

  @media (max-width: 600px) {
    .phone-wall {
      display: block;
    }

    .phone-wall pre {
      color: #ff4444;
      background: none !important;
      border: none !important;
      padding: 0 !important;
      white-space: pre-wrap;
    }

    main, footer {
      display: none;
    }
  }
</style>
